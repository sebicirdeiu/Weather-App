(()=>{"use strict";const e=new Map;function t(t,r){t.forEach((t=>{e.set(t,r)}))}function r({current:e,daily:t,hourly:r}){!function(e){document.querySelector("#main").src=a(e.iconCode),n("current-temp",e.currentTemp),n("current-high",e.highTemp),n("current-min",e.lowTemp),n("current-feel",e.flTemp),n("current-wind",e.windSpeed),n("current-precip",e.precip),n("current-date",i.format(e.timestamp))}(e),m(t);const u=document.querySelector(".hour-section"),d=document.querySelector("[data-day-section]");document.querySelector(".zile").addEventListener("click",(()=>{m(t),u.style.display="none",d.style.display="flex"})),document.querySelector(".ore").addEventListener("click",(()=>{!function(e){const t=document.querySelector("[data-hour-section]"),r=document.getElementById("hour-row-template");t.innerHTML="",e.forEach(((e,i)=>{if(i<24){i++;const m=r.content.cloneNode(!0);n("temp",e.temp,{parent:m}),n("fl-temp",e.feelsLike,{parent:m}),n("wind",e.windSpeed,{parent:m}),n("precip",e.precip,{parent:m}),n("day",o.format(e.timestamp),{parent:m}),n("time",c.format(e.timestamp),{parent:m}),m.querySelector("[data-icon]").src=a(e.iconCode),t.append(m)}}))}(r),d.style.display="none",u.style.display="table"}))}function n(e,t,{parent:r=document}={}){r.querySelector(`[data-${e}]`).textContent=t}function a(t){return`./assets/animated/${e.get(t)}.svg`}t([0,1],"day"),t([2],"cloudy-day-1"),t([3],"cloudy-day-2"),t([45,48],"cloudy-day-3"),t([51,53],"rainy-1"),t([55,56,57],"rainy-2"),t([61,63],"rainy-3"),t([65],"rainy-4"),t([66,67],"rainy-6"),t([71,73,75,77,85,86],"snowy-3"),t([95,96,99],"thunder"),navigator.geolocation.getCurrentPosition((function({coords:e}){(async function(){try{const e=await fetch("https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&hourly=temperature_2m,apparent_temperature,precipitation,weathercode,windspeed_10m&daily=weathercode,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,precipitation_sum&current_weather=true&timeformat=unixtime&timezone=auto");let t=await e.json();console.log(t);return{current:function({current_weather:e,daily:t}){const{timestemp:r,temperature:n,windspeed:a,weathercode:o}=e,{temperature_2m_max:[i],temperature_2m_min:[c],apparent_temperature_max:[m],precipitation_sum:[u]}=t;return{time:r,currentTemp:Math.round(n),highTemp:Math.round(i),lowTemp:Math.round(c),flTemp:Math.round(m),windSpeed:Math.round(a),precip:Math.round(u),iconCode:o}}(t),daily:function({daily:e}){return e.time.map(((t,r)=>({timestamp:1e3*t,iconCode:e.weathercode[r],maxTemp:Math.round(e.temperature_2m_max[r])})))}(t),hourly:function({hourly:e,current_weather:t}){return e.time.map(((t,r)=>({timestamp:1e3*t,iconCode:e.weathercode[r],temp:Math.round(e.temperature_2m[r]),feelsLike:Math.round(e.apparent_temperature[r]),windSpeed:Math.round(e.windspeed_10m[r]),precip:Math.round(100*e.precipitation[r])/100}))).filter((({timestamp:e})=>e>=1e3*t.time))}(t)}}catch(e){console.error(e)}})(e.latitude,e.longitude,Intl.DateTimeFormat().resolvedOptions().timeZone).then(r).catch((e=>{console.error(e),alert("Eroare obtinere date meteo :(")}))}),(function(){alert("A aparut o eroare la identificarea locatiei, incearca din nou si reincarca pagina!")}));const o=new Intl.DateTimeFormat(["ro-RO"],{weekday:"long"}),i=new Intl.DateTimeFormat(["ro-RO"],{weekday:"long",day:"numeric",month:"2-digit",year:"numeric"}),c=new Intl.DateTimeFormat(void 0,{hour:"numeric"});function m(e){const t=document.querySelector("[data-day-section]"),r=document.getElementById("day-card-template");t.innerHTML="",e.forEach((e=>{const i=r.content.cloneNode(!0);n("temp",e.maxTemp,{parent:i}),n("date",o.format(e.timestamp),{parent:i}),i.querySelector("[data-icon]").src=a(e.iconCode),t.append(i)}))}})();